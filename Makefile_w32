CC=gcc
INCLUDE = -I./include -I./opl -Ic/MinGW/include
CFLAGS  = -g $(INCLUDE)
	# fmopl.o \

AUDIOPLAY_TARG := audioplay.exe
AUDIOPLAY_OBJS := \
	sqz.o \
	audioplay.o \
	SDL_win32_main.o \
	opl/libopl_win32.a

DIRS = .

all : $(AUDIOPLAY_TARG)

$(AUDIOPLAY_TARG) : $(AUDIOPLAY_OBJS)
	$(CC) $(CFLAGS) -o $(AUDIOPLAY_TARG) $(AUDIOPLAY_OBJS) `sdl-config --cflags` -L/usr/local/lib -lmingw32 -lSDL -lm -lSDL_mixer -luser32 -lgdi32 -lwinmm -ldxguid -ldinput8 -DNO_STDIO_REDIRECT

clean :
	rm -f $(foreach dir,$(DIRS),$(foreach suffix,/*.o, $(addsuffix $(suffix),$(dir))))
